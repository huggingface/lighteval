{
  "name": "F1 Score Macro Test Suite",
  "description": "Test cases for f1_score_macro metric (corpus-level macro F1 score)",
  "corpus_level": true,
  "test_cases": [
    {
      "name": "F1 Score Macro - Perfect Predictions",
      "metric_class": "f1_score_macro",
      "metric_params": {},
      "metric_name": "f1",
      "docs": [
        {
          "query": "What is the capital of France?",
          "choices": ["Paris", "London", "Berlin"],
          "gold_index": 0,
          "task_name": "geography"
        },
        {
          "query": "What is 2 + 2?",
          "choices": ["3", "4", "5"],
          "gold_index": 1,
          "task_name": "math"
        },
        {
          "query": "What color is the sky?",
          "choices": ["Red", "Blue", "Green"],
          "gold_index": 1,
          "task_name": "science"
        }
      ],
      "model_responses": [
        {
          "text": ["Paris"]
        },
        {
          "text": ["4"]
        },
        {
          "text": ["Blue"]
        }
      ],
      "expected_output": 1.0,
      "tolerance": 0.01,
      "description": "Perfect predictions - all model outputs exactly match the gold choices"
    },
    {
      "name": "F1 Score Macro - Balanced Performance",
      "metric_class": "f1_score_macro",
      "metric_params": {},
      "metric_name": "f1",
      "docs": [
        {
          "query": "Summarize: The quick brown fox jumps over the lazy dog",
          "choices": ["The quick brown fox jumps over the lazy dog"],
          "gold_index": 0,
          "task_name": "summarization"
        },
        {
          "query": "What is the weather like?",
          "choices": ["It is sunny and warm today"],
          "gold_index": 0,
          "task_name": "weather"
        },
        {
          "query": "Describe a cat",
          "choices": ["A cat is a small furry animal"],
          "gold_index": 0,
          "task_name": "description"
        }
      ],
      "model_responses": [
        {
          "text": ["The quick brown fox"]
        },
        {
          "text": ["It is sunny today"]
        },
        {
          "text": ["A cat is furry"]
        }
      ],
      "expected_output": 0.0,
      "tolerance": 0.1,
      "description": "Balanced partial matches - all samples have similar word overlap levels"
    },
    {
      "name": "F1 Score Macro - Mixed Performance",
      "metric_class": "f1_score_macro",
      "metric_params": {},
      "metric_name": "f1",
      "docs": [
        {
          "query": "What is the capital of Japan?",
          "choices": ["Tokyo"],
          "gold_index": 0,
          "task_name": "geography"
        },
        {
          "query": "What is 5 x 5?",
          "choices": ["25"],
          "gold_index": 0,
          "task_name": "math"
        },
        {
          "query": "What is the largest planet?",
          "choices": ["Jupiter"],
          "gold_index": 0,
          "task_name": "science"
        }
      ],
      "model_responses": [
        {
          "text": ["Tokyo"]
        },
        {
          "text": ["30"]
        },
        {
          "text": ["Jupiter"]
        }
      ],
      "expected_output": 0.5,
      "tolerance": 0.1,
      "description": "Mixed performance - 2 perfect matches, 1 no match (macro average of individual F1s)"
    },
    {
      "name": "F1 Score Macro - No Matches",
      "metric_class": "f1_score_macro",
      "metric_params": {},
      "metric_name": "f1",
      "docs": [
        {
          "query": "What is the main ingredient in pizza?",
          "choices": ["Cheese is the main ingredient in pizza"],
          "gold_index": 0,
          "task_name": "cooking"
        },
        {
          "query": "What is the opposite of hot?",
          "choices": ["Cold"],
          "gold_index": 0,
          "task_name": "vocabulary"
        },
        {
          "query": "What is the largest ocean?",
          "choices": ["The Pacific Ocean is the largest"],
          "gold_index": 0,
          "task_name": "geography"
        }
      ],
      "model_responses": [
        {
          "text": ["Tomato sauce"]
        },
        {
          "text": ["Warm"]
        },
        {
          "text": ["Atlantic Ocean"]
        }
      ],
      "expected_output": 0.0,
      "tolerance": 0.01,
      "description": "No matches - all model outputs have zero word overlap with gold choices"
    }
  ]
}
