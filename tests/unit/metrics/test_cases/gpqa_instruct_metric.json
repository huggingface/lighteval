{
  "name": "Gpqa Instruct Metric Test Suite",
  "description": "Test cases for gpqa_instruct_metric metric - tests multiple choice answer extraction (A, B, C, D)",
  "test_cases": [
    {
      "name": "Basic Answer Extraction - Direct Answer",
      "metric_class": "gpqa_instruct_metric",
      "metric_params": {},
      "doc": {
        "query": "Answer the following multiple choice question. The last line of your response should be of the following format: 'Answer: $LETTER' (without quotes) where LETTER is one of ABCD. Think step by step before answering.\n\nWhat is the capital of France?\n\nA) London\nB) Paris\nC) Berlin\nD) Madrid",
        "choices": ["A", "B", "C", "D"],
        "gold_index": 1,
        "task_name": "gpqa_instruct"
      },
      "model_response": {
        "text": [
          "Let me think about this step by step. France is a country in Europe, and its capital city is Paris. This is a well-known fact in geography.\n\nAnswer: B"
        ]
      },
      "expected_output": {
        "extractive_match": 1.0
      },
      "tolerance": 0.01,
      "description": "Basic test case with direct answer format"
    },
    {
      "name": "Answer with Reasoning - Correct Format",
      "metric_class": "gpqa_instruct_metric",
      "metric_params": {},
      "doc": {
        "query": "Answer the following multiple choice question. The last line of your response should be of the following format: 'Answer: $LETTER' (without quotes) where LETTER is one of ABCD. Think step by step before answering.\n\nWhich planet is closest to the Sun?\n\nA) Earth\nB) Venus\nC) Mercury\nD) Mars",
        "choices": ["A", "B", "C", "D"],
        "gold_index": 2,
        "task_name": "gpqa_instruct"
      },
      "model_response": {
        "text": [
          "Let me think about this step by step. The planets in order from the Sun are: Mercury, Venus, Earth, Mars, Jupiter, Saturn, Uranus, Neptune. So Mercury is the closest planet to the Sun.\n\nAnswer: C"
        ]
      },
      "expected_output": {
        "extractive_match": 1.0
      },
      "tolerance": 0.01,
      "description": "Answer with reasoning but correct final format"
    },
    {
      "name": "Answer Embedded in Reasoning",
      "metric_class": "gpqa_instruct_metric",
      "metric_params": {},
      "doc": {
        "query": "Answer the following multiple choice question. The last line of your response should be of the following format: 'Answer: $LETTER' (without quotes) where LETTER is one of ABCD. Think step by step before answering.\n\nWhat is 2 + 2?\n\nA) 3\nB) 4\nC) 5\nD) 6",
        "choices": ["A", "B", "C", "D"],
        "gold_index": 1,
        "task_name": "gpqa_instruct"
      },
      "model_response": {
        "text": [
          "Let me think about this step by step. 2 + 2 = 4, so the answer is B. This is basic arithmetic.\n\nAnswer: B"
        ]
      },
      "expected_output": {
        "extractive_match": 1.0
      },
      "tolerance": 0.01,
      "description": "Answer mentioned in reasoning and correctly formatted at end"
    },
    {
      "name": "Wrong Answer Format",
      "metric_class": "gpqa_instruct_metric",
      "metric_params": {},
      "doc": {
        "query": "Answer the following multiple choice question. The last line of your response should be of the following format: 'Answer: $LETTER' (without quotes) where LETTER is one of ABCD. Think step by step before answering.\n\nWhat color is the sky?\n\nA) Red\nB) Green\nC) Blue\nD) Yellow",
        "choices": ["A", "B", "C", "D"],
        "gold_index": 2,
        "task_name": "gpqa_instruct"
      },
      "model_response": {
        "text": [
          "The sky appears blue due to Rayleigh scattering of sunlight. The answer is C.\n\nAnswer: A"
        ]
      },
      "expected_output": {
        "extractive_match": 0.0
      },
      "tolerance": 0.01,
      "description": "Correct reasoning but wrong final answer"
    },
    {
      "name": "No Answer Format",
      "metric_class": "gpqa_instruct_metric",
      "metric_params": {},
      "doc": {
        "query": "Answer the following multiple choice question. The last line of your response should be of the following format: 'Answer: $LETTER' (without quotes) where LETTER is one of ABCD. Think step by step before answering.\n\nWhat is the largest ocean?\n\nA) Atlantic\nB) Indian\nC) Pacific\nD) Arctic",
        "choices": ["A", "B", "C", "D"],
        "gold_index": 2,
        "task_name": "gpqa_instruct"
      },
      "model_response": {
        "text": [
          "The Pacific Ocean is the largest ocean on Earth, covering about one-third of the Earth's surface. It's much larger than the Atlantic, Indian, and Arctic oceans."
        ]
      },
      "expected_output": {
        "extractive_match": 0.0
      },
      "tolerance": 0.01,
      "description": "Correct reasoning but no answer format"
    },
    {
      "name": "Multiple Answer Mentions",
      "metric_class": "gpqa_instruct_metric",
      "metric_params": {},
      "doc": {
        "query": "Answer the following multiple choice question. The last line of your response should be of the following format: 'Answer: $LETTER' (without quotes) where LETTER is one of ABCD. Think step by step before answering.\n\nWhich is a primary color?\n\nA) Orange\nB) Purple\nC) Red\nD) Green",
        "choices": ["A", "B", "C", "D"],
        "gold_index": 2,
        "task_name": "gpqa_instruct"
      },
      "model_response": {
        "text": [
          "The primary colors are red, blue, and yellow. So the answer is C (Red). Red is a primary color because it cannot be created by mixing other colors.\n\nAnswer: C"
        ]
      },
      "expected_output": {
        "extractive_match": 1.0
      },
      "tolerance": 0.01,
      "description": "Answer mentioned multiple times but correct final format"
    },
    {
      "name": "Answer with Parentheses",
      "metric_class": "gpqa_instruct_metric",
      "metric_params": {},
      "doc": {
        "query": "Answer the following multiple choice question. The last line of your response should be of the following format: 'Answer: $LETTER' (without quotes) where LETTER is one of ABCD. Think step by step before answering.\n\nWhat is the chemical symbol for gold?\n\nA) Ag\nB) Au\nC) Fe\nD) Cu",
        "choices": ["A", "B", "C", "D"],
        "gold_index": 1,
        "task_name": "gpqa_instruct"
      },
      "model_response": {
        "text": [
          "The chemical symbol for gold is Au, which comes from the Latin word 'aurum'. So the answer is (B) Au.\n\nAnswer: B"
        ]
      },
      "expected_output": {
        "extractive_match": 1.0
      },
      "tolerance": 0.01,
      "description": "Answer with parentheses but correct final format"
    },
    {
      "name": "Answer with Period",
      "metric_class": "gpqa_instruct_metric",
      "metric_params": {},
      "doc": {
        "query": "Answer the following multiple choice question. The last line of your response should be of the following format: 'Answer: $LETTER' (without quotes) where LETTER is one of ABCD. Think step by step before answering.\n\nHow many sides does a triangle have?\n\nA) 2\nB) 3\nC) 4\nD) 5",
        "choices": ["A", "B", "C", "D"],
        "gold_index": 1,
        "task_name": "gpqa_instruct"
      },
      "model_response": {
        "text": [
          "A triangle is a polygon with three sides. So the answer is B.\n\nAnswer: B."
        ]
      },
      "expected_output": {
        "extractive_match": 1.0
      },
      "tolerance": 0.01,
      "description": "Answer with period but still extractable"
    },
    {
      "name": "Answer with Extra Text",
      "metric_class": "gpqa_instruct_metric",
      "metric_params": {},
      "doc": {
        "query": "Answer the following multiple choice question. The last line of your response should be of the following format: 'Answer: $LETTER' (without quotes) where LETTER is one of ABCD. Think step by step before answering.\n\nWhat is the opposite of hot?\n\nA) Warm\nB) Cold\nC) Lukewarm\nD) Tepid",
        "choices": ["A", "B", "C", "D"],
        "gold_index": 1,
        "task_name": "gpqa_instruct"
      },
      "model_response": {
        "text": [
          "The opposite of hot is cold. So the answer is B.\n\nAnswer: B, which is cold."
        ]
      },
      "expected_output": {
        "extractive_match": 1.0
      },
      "tolerance": 0.01,
      "description": "Answer with extra text but letter still extractable"
    },
    {
      "name": "Answer in Different Case",
      "metric_class": "gpqa_instruct_metric",
      "metric_params": {},
      "doc": {
        "query": "Answer the following multiple choice question. The last line of your response should be of the following format: 'Answer: $LETTER' (without quotes) where LETTER is one of ABCD. Think step by step before answering.\n\nWhat is the largest planet?\n\nA) Earth\nB) Mars\nC) Jupiter\nD) Saturn",
        "choices": ["A", "B", "C", "D"],
        "gold_index": 2,
        "task_name": "gpqa_instruct"
      },
      "model_response": {
        "text": [
          "Jupiter is the largest planet in our solar system. So the answer is c.\n\nAnswer: c"
        ]
      },
      "expected_output": {
        "extractive_match": 0.0
      },
      "tolerance": 0.01,
      "description": "Answer in lowercase but still extractable"
    },
    {
      "name": "Answer with Reasoning Only",
      "metric_class": "gpqa_instruct_metric",
      "metric_params": {},
      "doc": {
        "query": "Answer the following multiple choice question. The last line of your response should be of the following format: 'Answer: $LETTER' (without quotes) where LETTER is one of ABCD. Think step by step before answering.\n\nWhat is the square root of 16?\n\nA) 2\nB) 4\nC) 8\nD) 16",
        "choices": ["A", "B", "C", "D"],
        "gold_index": 1,
        "task_name": "gpqa_instruct"
      },
      "model_response": {
        "text": [
          "The square root of 16 is 4, because 4 × 4 = 16. Therefore, the answer is B."
        ]
      },
      "expected_output": {
        "extractive_match": 1.0
      },
      "tolerance": 0.01,
      "description": "Answer embedded in reasoning without formal format"
    },
    {
      "name": "Answer with Quotes",
      "metric_class": "gpqa_instruct_metric",
      "metric_params": {},
      "doc": {
        "query": "Answer the following multiple choice question. The last line of your response should be of the following format: 'Answer: $LETTER' (without quotes) where LETTER is one of ABCD. Think step by step before answering.\n\nWhat is the capital of Japan?\n\nA) Beijing\nB) Seoul\nC) Tokyo\nD) Bangkok",
        "choices": ["A", "B", "C", "D"],
        "gold_index": 2,
        "task_name": "gpqa_instruct"
      },
      "model_response": {
        "text": [
          "The capital of Japan is Tokyo. So the answer is \"C\".\n\nAnswer: \"C\""
        ]
      },
      "expected_output": {
        "extractive_match": 1.0
      },
      "tolerance": 0.01,
      "description": "Answer with quotes but still extractable"
    },
    {
      "name": "Answer with Multiple Letters",
      "metric_class": "gpqa_instruct_metric",
      "metric_params": {},
      "doc": {
        "query": "Answer the following multiple choice question. The last line of your response should be of the following format: 'Answer: $LETTER' (without quotes) where LETTER is one of ABCD. Think step by step before answering.\n\nWhich of these are mammals?\n\nA) Fish\nB) Birds\nC) Dogs\nD) Reptiles",
        "choices": ["A", "B", "C", "D"],
        "gold_index": 2,
        "task_name": "gpqa_instruct"
      },
      "model_response": {
        "text": [
          "Dogs are mammals, while fish, birds, and reptiles are not. So the answer is C.\n\nAnswer: C"
        ]
      },
      "expected_output": {
        "extractive_match": 1.0
      },
      "tolerance": 0.01,
      "description": "Multiple letters mentioned but correct single answer"
    },
    {
      "name": "Answer with Explanation",
      "metric_class": "gpqa_instruct_metric",
      "metric_params": {},
      "doc": {
        "query": "Answer the following multiple choice question. The last line of your response should be of the following format: 'Answer: $LETTER' (without quotes) where LETTER is one of ABCD. Think step by step before answering.\n\nWhat is the chemical formula for water?\n\nA) CO2\nB) H2O\nC) O2\nD) NaCl",
        "choices": ["A", "B", "C", "D"],
        "gold_index": 1,
        "task_name": "gpqa_instruct"
      },
      "model_response": {
        "text": [
          "Water is composed of two hydrogen atoms and one oxygen atom, so its chemical formula is H2O. Therefore, the answer is B.\n\nAnswer: B"
        ]
      },
      "expected_output": {
        "extractive_match": 1.0
      },
      "tolerance": 0.01,
      "description": "Answer with detailed explanation"
    },
    {
      "name": "Answer with Confidence",
      "metric_class": "gpqa_instruct_metric",
      "metric_params": {},
      "doc": {
        "query": "Answer the following multiple choice question. The last line of your response should be of the following format: 'Answer: $LETTER' (without quotes) where LETTER is one of ABCD. Think step by step before answering.\n\nWhat is the speed of light?\n\nA) 186,000 mph\nB) 186,000 m/s\nC) 186,000 km/s\nD) 186,000 km/h",
        "choices": ["A", "B", "C", "D"],
        "gold_index": 2,
        "task_name": "gpqa_instruct"
      },
      "model_response": {
        "text": [
          "The speed of light in a vacuum is approximately 186,000 miles per second, which is about 300,000 kilometers per second. So the answer is definitely C.\n\nAnswer: C"
        ]
      },
      "expected_output": {
        "extractive_match": 1.0
      },
      "tolerance": 0.01,
      "description": "Answer with confidence indicator"
    },
    {
      "name": "Answer with Step-by-Step",
      "metric_class": "gpqa_instruct_metric",
      "metric_params": {},
      "doc": {
        "query": "Answer the following multiple choice question. The last line of your response should be of the following format: 'Answer: $LETTER' (without quotes) where LETTER is one of ABCD. Think step by step before answering.\n\nWhat is 15 × 3?\n\nA) 35\nB) 40\nC) 45\nD) 50",
        "choices": ["A", "B", "C", "D"],
        "gold_index": 2,
        "task_name": "gpqa_instruct"
      },
      "model_response": {
        "text": [
          "Let me solve this step by step:\n1. 15 × 3 = 45\n2. This matches option C\n\nAnswer: C"
        ]
      },
      "expected_output": {
        "extractive_match": 1.0
      },
      "tolerance": 0.01,
      "description": "Answer with numbered steps"
    },
    {
      "name": "Answer with Elimination",
      "metric_class": "gpqa_instruct_metric",
      "metric_params": {},
      "doc": {
        "query": "Answer the following multiple choice question. The last line of your response should be of the following format: 'Answer: $LETTER' (without quotes) where LETTER is one of ABCD. Think step by step before answering.\n\nWhich is not a fruit?\n\nA) Apple\nB) Carrot\nC) Banana\nD) Orange",
        "choices": ["A", "B", "C", "D"],
        "gold_index": 1,
        "task_name": "gpqa_instruct"
      },
      "model_response": {
        "text": [
          "Let me eliminate the wrong answers:\n- Apple is a fruit ✓\n- Carrot is a vegetable ✗\n- Banana is a fruit ✓\n- Orange is a fruit ✓\n\nSo the answer is B.\n\nAnswer: B"
        ]
      },
      "expected_output": {
        "extractive_match": 1.0
      },
      "tolerance": 0.01,
      "description": "Answer using elimination method"
    },
    {
      "name": "Answer with Definition",
      "metric_class": "gpqa_instruct_metric",
      "metric_params": {},
      "doc": {
        "query": "Answer the following multiple choice question. The last line of your response should be of the following format: 'Answer: $LETTER' (without quotes) where LETTER is one of ABCD. Think step by step before answering.\n\nWhat is a synonym for 'happy'?\n\nA) Sad\nB) Joyful\nC) Angry\nD) Tired",
        "choices": ["A", "B", "C", "D"],
        "gold_index": 1,
        "task_name": "gpqa_instruct"
      },
      "model_response": {
        "text": [
          "A synonym is a word that means the same or nearly the same as another word. 'Happy' means feeling or showing pleasure or contentment. 'Joyful' means feeling, expressing, or causing great pleasure and happiness. Therefore, 'joyful' is a synonym for 'happy', so the answer is B.\n\nAnswer: B"
        ]
      },
      "expected_output": {
        "extractive_match": 1.0
      },
      "tolerance": 0.01,
      "description": "Answer with definition and explanation"
    },
    {
      "name": "Answer with Comparison",
      "metric_class": "gpqa_instruct_metric",
      "metric_params": {},
      "doc": {
        "query": "Answer the following multiple choice question. The last line of your response should be of the following format: 'Answer: $LETTER' (without quotes) where LETTER is one of ABCD. Think step by step before answering.\n\nWhich is larger?\n\nA) 1/2\nB) 1/3\nC) 1/4\nD) 1/5",
        "choices": ["A", "B", "C", "D"],
        "gold_index": 0,
        "task_name": "gpqa_instruct"
      },
      "model_response": {
        "text": [
          "Let me compare these fractions:\n1/2 = 0.5\n1/3 ≈ 0.333\n1/4 = 0.25\n1/5 = 0.2\n\n1/2 is the largest, so the answer is A.\n\nAnswer: A"
        ]
      },
      "expected_output": {
        "extractive_match": 1.0
      },
      "tolerance": 0.01,
      "description": "Answer with numerical comparison"
    },
    {
      "name": "Answer with Context",
      "metric_class": "gpqa_instruct_metric",
      "metric_params": {},
      "doc": {
        "query": "Answer the following multiple choice question. The last line of your response should be of the following format: 'Answer: $LETTER' (without quotes) where LETTER is one of ABCD. Think step by step before answering.\n\nIn what year did World War II end?\n\nA) 1943\nB) 1944\nC) 1945\nD) 1946",
        "choices": ["A", "B", "C", "D"],
        "gold_index": 2,
        "task_name": "gpqa_instruct"
      },
      "model_response": {
        "text": [
          "World War II ended in 1945. Germany surrendered in May 1945, and Japan surrendered in September 1945 after the atomic bombings of Hiroshima and Nagasaki. So the answer is C.\n\nAnswer: C"
        ]
      },
      "expected_output": {
        "extractive_match": 1.0
      },
      "tolerance": 0.01,
      "description": "Answer with historical context"
    },
    {
      "name": "Answer with Formula",
      "metric_class": "gpqa_instruct_metric",
      "metric_params": {},
      "doc": {
        "query": "Answer the following multiple choice question. The last line of your response should be of the following format: 'Answer: $LETTER' (without quotes) where LETTER is one of ABCD. Think step by step before answering.\n\nWhat is the area of a circle with radius 3?\n\nA) 6π\nB) 9π\nC) 12π\nD) 18π",
        "choices": ["A", "B", "C", "D"],
        "gold_index": 1,
        "task_name": "gpqa_instruct"
      },
      "model_response": {
        "text": [
          "The area of a circle is given by the formula A = πr².\nFor radius r = 3:\nA = π(3)² = π(9) = 9π\n\nSo the answer is B.\n\nAnswer: B"
        ]
      },
      "expected_output": {
        "extractive_match": 1.0
      },
      "tolerance": 0.01,
      "description": "Answer with mathematical formula"
    }
  ]
}
