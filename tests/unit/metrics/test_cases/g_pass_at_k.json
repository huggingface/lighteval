{
  "name": "G Pass At K Test Suite",
  "description": "Comprehensive test cases for g_pass_at_k metric covering various scenarios including multiple samples, different k values, thresholds, and general text content",
  "test_cases": [
    {
      "name": "G Pass At K - Basic Single Sample Correct",
      "metric_class": "g_pass_at_k",
      "metric_params": {
        "k": 1,
        "n": 1,
        "thresholds": [0.0, 0.25, 0.5, 0.75, 1.0],
        "strip_strings": true
      },
      "doc": {
        "query": "What is the capital of France?",
        "choices": ["Paris", "London", "Berlin"],
        "gold_index": 0,
        "task_name": "geography"
      },
      "model_response": {
        "text": ["Paris"],
        "logprobs": [],
        "output_tokens": []
      },
      "expected_output": {
        "g-pass@1_0.0": 1.0,
        "g-pass@1_0.25": 1.0,
        "g-pass@1_0.5": 1.0,
        "g-pass@1_0.75": 1.0,
        "g-pass@1_1.0": 1.0,
        "mg-pass@1": 0.0
      },
      "tolerance": 0.01,
      "description": "Basic test case with single correct sample"
    },
    {
      "name": "G Pass At K - Multiple Samples All Correct",
      "metric_class": "g_pass_at_k",
      "metric_params": {
        "k": 2,
        "n": 3,
        "thresholds": [0.0, 0.25, 0.5, 0.75, 1.0],
        "strip_strings": true
      },
      "doc": {
        "query": "What is the largest planet in our solar system?",
        "choices": ["Jupiter"],
        "gold_index": 0,
        "task_name": "astronomy"
      },
      "model_response": {
        "text": ["Jupiter", "Jupiter", "Jupiter"],
        "logprobs": [],
        "output_tokens": []
      },
      "expected_output": {
        "g-pass@2_0.0": 1.0,
        "g-pass@2_0.25": 1.0,
        "g-pass@2_0.5": 1.0,
        "g-pass@2_0.75": 1.0,
        "g-pass@2_1.0": 1.0,
        "mg-pass@2": 1.0
      },
      "tolerance": 0.01,
      "description": "Test case with multiple samples all correct"
    },
    {
      "name": "G Pass At K - Mixed Correct and Incorrect",
      "metric_class": "g_pass_at_k",
      "metric_params": {
        "k": 2,
        "n": 4,
        "thresholds": [0.0, 0.25, 0.5, 0.75, 1.0],
        "strip_strings": true
      },
      "doc": {
        "query": "Who wrote Romeo and Juliet?",
        "choices": ["William Shakespeare"],
        "gold_index": 0,
        "task_name": "literature"
      },
      "model_response": {
        "text": ["William Shakespeare", "Shakespeare", "William Shakespeare", "Charles Dickens"],
        "logprobs": [],
        "output_tokens": []
      },
      "expected_output": {
        "g-pass@2_0.0": 0.8333333333333334,
        "g-pass@2_0.25": 0.8333333333333334,
        "g-pass@2_0.5": 0.8333333333333334,
        "g-pass@2_0.75": 0.16666666666666666,
        "g-pass@2_1.0": 0.16666666666666666,
        "mg-pass@2": 0.16666666666666666
      },
      "tolerance": 0.01,
      "description": "Test case with mixed correct and incorrect samples"
    },
    {
      "name": "G Pass At K - Case Sensitivity",
      "metric_class": "g_pass_at_k",
      "metric_params": {
        "k": 1,
        "n": 2,
        "thresholds": [0.0, 0.25, 0.5, 0.75, 1.0],
        "strip_strings": true
      },
      "doc": {
        "query": "What is the chemical symbol for gold?",
        "choices": ["Au"],
        "gold_index": 0,
        "task_name": "chemistry"
      },
      "model_response": {
        "text": ["Au", "au"],
        "logprobs": [],
        "output_tokens": []
      },
      "expected_output": {
        "g-pass@1_0.0": 0.5,
        "g-pass@1_0.25": 0.5,
        "g-pass@1_0.5": 0.5,
        "g-pass@1_0.75": 0.5,
        "g-pass@1_1.0": 0.5,
        "mg-pass@1": 0.0
      },
      "tolerance": 0.01,
      "description": "Test case with case sensitivity (strip_strings should handle this)"
    },
    {
      "name": "G Pass At K - All Incorrect Samples",
      "metric_class": "g_pass_at_k",
      "metric_params": {
        "k": 1,
        "n": 3,
        "thresholds": [0.0, 0.25, 0.5, 0.75, 1.0],
        "strip_strings": true
      },
      "doc": {
        "query": "What year did World War II end?",
        "choices": ["1945"],
        "gold_index": 0,
        "task_name": "history"
      },
      "model_response": {
        "text": ["1944", "1946", "1939"],
        "logprobs": [],
        "output_tokens": []
      },
      "expected_output": {
        "g-pass@1_0.0": 0.0,
        "g-pass@1_0.25": 0.0,
        "g-pass@1_0.5": 0.0,
        "g-pass@1_0.75": 0.0,
        "g-pass@1_1.0": 0.0,
        "mg-pass@1": 0.0
      },
      "tolerance": 0.01,
      "description": "Test case with all incorrect samples"
    },
    {
      "name": "G Pass At K - High K Value",
      "metric_class": "g_pass_at_k",
      "metric_params": {
        "k": 5,
        "n": 8,
        "thresholds": [0.0, 0.25, 0.5, 0.75, 1.0],
        "strip_strings": true
      },
      "doc": {
        "query": "What is the speed of light in vacuum?",
        "choices": ["299,792,458 meters per second"],
        "gold_index": 0,
        "task_name": "physics"
      },
      "model_response": {
        "text": ["299,792,458 meters per second", "3x10^8 m/s", "299,792,458 meters per second", "300,000 km/s", "299,792,458 meters per second", "c", "299,792,458 meters per second", "186,282 miles per second"],
        "logprobs": [],
        "output_tokens": []
      },
      "expected_output": {
        "g-pass@5_0.0": 1.0,
        "g-pass@5_0.25": 0.9285714285714286,
        "g-pass@5_0.5": 0.5,
        "g-pass@5_0.75": 0.07142857142857142,
        "g-pass@5_1.0": 0.0,
        "mg-pass@5": 0.02857142857142857
      },
      "tolerance": 0.01,
      "description": "Test case with high k value and multiple correct samples"
    },
    {
      "name": "G Pass At K - Long Text Answer",
      "metric_class": "g_pass_at_k",
      "metric_params": {
        "k": 1,
        "n": 2,
        "thresholds": [0.0, 0.25, 0.5, 0.75, 1.0],
        "strip_strings": true
      },
      "doc": {
        "query": "What is the main theme of George Orwell's 1984?",
        "choices": ["Totalitarianism and surveillance"],
        "gold_index": 0,
        "task_name": "literature"
      },
      "model_response": {
        "text": ["Totalitarianism and surveillance", "Dystopian society"],
        "logprobs": [],
        "output_tokens": []
      },
      "expected_output": {
        "g-pass@1_0.0": 0.5,
        "g-pass@1_0.25": 0.5,
        "g-pass@1_0.5": 0.5,
        "g-pass@1_0.75": 0.5,
        "g-pass@1_1.0": 0.5,
        "mg-pass@1": 0.0
      },
      "tolerance": 0.01,
      "description": "Test case with longer text answers"
    },
    {
      "name": "G Pass At K - Numeric Answer",
      "metric_class": "g_pass_at_k",
      "metric_params": {
        "k": 1,
        "n": 3,
        "thresholds": [0.0, 0.25, 0.5, 0.75, 1.0],
        "strip_strings": true
      },
      "doc": {
        "query": "How many sides does a hexagon have?",
        "choices": ["6"],
        "gold_index": 0,
        "task_name": "geometry"
      },
      "model_response": {
        "text": ["6", "six", "Six"],
        "logprobs": [],
        "output_tokens": []
      },
      "expected_output": {
        "g-pass@1_0.0": 0.3333333333333333,
        "g-pass@1_0.25": 0.3333333333333333,
        "g-pass@1_0.5": 0.3333333333333333,
        "g-pass@1_0.75": 0.3333333333333333,
        "g-pass@1_1.0": 0.3333333333333333,
        "mg-pass@1": 0.0
      },
      "tolerance": 0.01,
      "description": "Test case with numeric answers"
    },
    {
      "name": "G Pass At K - Partial Match",
      "metric_class": "g_pass_at_k",
      "metric_params": {
        "k": 2,
        "n": 4,
        "thresholds": [0.0, 0.25, 0.5, 0.75, 1.0],
        "strip_strings": true
      },
      "doc": {
        "query": "What is the full name of the author of Pride and Prejudice?",
        "choices": ["Jane Austen"],
        "gold_index": 0,
        "task_name": "literature"
      },
      "model_response": {
        "text": ["Jane Austen", "Austen", "Jane Austen", "J. Austen"],
        "logprobs": [],
        "output_tokens": []
      },
      "expected_output": {
        "g-pass@2_0.0": 0.8333333333333334,
        "g-pass@2_0.25": 0.8333333333333334,
        "g-pass@2_0.5": 0.8333333333333334,
        "g-pass@2_0.75": 0.16666666666666666,
        "g-pass@2_1.0": 0.16666666666666666,
        "mg-pass@2": 0.16666666666666666
      },
      "tolerance": 0.01,
      "description": "Test case with partial matches (exact string matching)"
    },
    {
      "name": "G Pass At K - Edge Case Empty String",
      "metric_class": "g_pass_at_k",
      "metric_params": {
        "k": 1,
        "n": 1,
        "thresholds": [0.0, 0.25, 0.5, 0.75, 1.0],
        "strip_strings": true
      },
      "doc": {
        "query": "What is the answer to this question?",
        "choices": [""],
        "gold_index": 0,
        "task_name": "test"
      },
      "model_response": {
        "text": [""],
        "logprobs": [],
        "output_tokens": []
      },
      "expected_output": {
        "g-pass@1_0.0": 1.0,
        "g-pass@1_0.25": 1.0,
        "g-pass@1_0.5": 1.0,
        "g-pass@1_0.75": 1.0,
        "g-pass@1_1.0": 1.0,
        "mg-pass@1": 0.0
      },
      "tolerance": 0.01,
      "description": "Edge case with empty string"
    }
  ]
}
